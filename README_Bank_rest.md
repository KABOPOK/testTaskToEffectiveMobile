# üè¶ Bank Card Management System

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ —Å REST API, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ Spring Boot —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ä–æ–ª–µ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ä–æ–ª–µ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (ADMIN/USER)
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: –ù–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç –∏ –ø–∞—Ä–æ–ª–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **–ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: OpenAPI 3.0 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker Compose –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (USER)
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –∫–∞—Ä—Ç (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ä—Ç–µ
- –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞ –∫–∞—Ä—Ç—ã
- –ó–∞–ø—Ä–æ—Å –Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∫–∞—Ä—Ç—ã ("TO_BLOCK")
- –ü–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å–≤–æ–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏
- –ü–æ–∏—Å–∫ –∫–∞—Ä—Ç –ø–æ –Ω–æ–º–µ—Ä—É

### üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä 
(ADMIN —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å—Ä–∞–∑—É login/password : admin/admin)
- –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–∞—Ä—Ç
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–∞—Ä—Ç —Å–∏—Å—Ç–µ–º—ã (–≤ –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ) (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç
- –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏(CRUD + –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º ("TO_BLOCK") (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Java 17, Spring Boot 
- **Security**: Spring Security, JWT
- **Database**: PostgreSQL, Spring Data JPA
- **Migration**: Liquibase
- **Documentation**: OpenAPI 3.0 (Swagger)
- **Containerization**: Docker, Docker Compose
- **Testing**: JUnit, Mockito
- **Build**: Maven

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –†–µ–∂–∏–º –ø—Ä–æ–¥–∞–∫—à–Ω 
```bash
mvn clean package
docker compose up
```

### –†–µ–∂–∏–º –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏
```bash
cd local
docker compose up
```

### –ü–æ—Ä—Ç—ã (–†–µ–∂–∏–º –ø—Ä–æ–¥–∞–∫—à–Ω)
- **API**: `8086`
- **PostgreSQL**: `5411`
- **Swagger UI**: `http://localhost:8086/swagger-ui/index.html`
### –ü–æ—Ä—Ç—ã (–†–µ–∂–∏–º –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏)
- **API**: `8084`
- **PostgreSQL**: `5422`
- **Swagger UI**: `http://localhost:8084/swagger-ui/index.html`

## üìö API Endpoints

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```
POST /api/public/user/register    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
POST /api/public/user/auth        # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```

### üí≥ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–∞—Ä—Ç–∞–º–∏
```
GET  /api/user/get_all_cards                    # –í—Å–µ –∫–∞—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET  /api/user/card/get_cards_by_number         # –ü–æ–∏—Å–∫ –∫–∞—Ä—Ç –ø–æ –Ω–æ–º–µ—Ä—É
GET  /api/user/card/{id}                        # –ö–∞—Ä—Ç–∞ –ø–æ ID
GET  /api/user/card/balance/{id}                # –ë–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã
PUT  /api/user/card/request_to_block/{id}       # –ó–∞–ø—Ä–æ—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
PUT  /api/user/card/transfer                    # –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏
```

### üõ° –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–∞—Ä—Ç–∞–º–∏
```
GET    /api/admin/card/get_all                  # –í—Å–µ –∫–∞—Ä—Ç—ã —Å–∏—Å—Ç–µ–º—ã
GET    /api/admin/card/get_to_block             # –ö–∞—Ä—Ç—ã –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
POST   /api/admin/card/create                   # –°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É
GET    /api/admin/card/get/{id}                 # –ö–∞—Ä—Ç–∞ –ø–æ ID
PUT    /api/admin/card/update/{id}              # –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç—É
PUT    /api/admin/card/block/{id}               # –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É
DELETE /api/admin/card/delete/{id}              # –£–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç—É
```

### üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (ADMIN)
```
GET    /api/admin/user/get_all_users            # –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
GET    /api/admin/user/get/{id}                 # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ ID
PUT    /api/admin/user/update/{id}              # –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
PUT    /api/admin/user/block/{id}               # –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
DELETE /api/admin/user/delete/{id}              # –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
mvn test
```

## ‚ö†Ô∏è –°—Ç–∞—Ç—É—Å—ã –∫–∞—Ä—Ç

- **ACTIVE**: –ê–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞, –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **BLOCKED**: –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞, –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
- **EXPIRED**: –ò—Å—Ç–µ–∫ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
- **TO_BLOCK**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫—É (–æ–∂–∏–¥–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∞)

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```json
{
  "errors": [
    {
      "title": "CARD_NOT_FOUND",
      "description": "Card with id 123e4567-e89b-12d3-a456-426614174000 not found"
    }
  ]
}
```